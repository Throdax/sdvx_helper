<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>hoge</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Monomaniac+One&display=swap" rel="stylesheet">
        <style>
            body { 
            height: 100%;
            width:100%;
            margin: 0px;
            padding: 0px;
            overflow: hidden;
            font-family:"RocknRoll One";
            color:#2196F3;   
            font-size: 30px;
            color: #fff;
            text-shadow: 6px 6px 0 #000,
                         -2px 2px 0 #000,
                         2px -2px 0 #000,
                         -2px -2px 0 #000;
            }
            div#all{
                display:flex;
                -moz-box-sizing:border-box;
                box-sizing: border-box;
                background-color: rgba(0, 0, 0, 0);
            }
            table {
            	width:100%;
                border: none;
            }
            table td {
                border: none;
                vertical-align: middle;
            	white-space:nowrap;
                height: 60px;
            }
            table td:nth-child(1){
                color:#ffffee;
                text-align:center;
                width:20%;
            }
            table td:nth-child(2){
                color:#eeeeee;
                text-align:center;
                width:10%;
            }
            table td:nth-child(3){
                font-size: 36px;
                max-width: 10px;
            	overflow:hidden;
            	text-overflow:ellipsis;
            }
            table td:nth-child(4){
                color: #ccffff;
                text-align:right;
                padding-right: 30px;
            	width:15%;
            }
            table td:nth-child(5){
                color:#eeeeee;
                text-align:center;
            	width:15%;
            }
            img{
                height: 25px;
            }
            .MAX{
                animation-name: flashmax;
                animation-duration: 0.4s;
                animation-iteration-count: infinite;
            }
            @keyframes flashmax {
                0%   { color: #ff2828; }
                20%  { color: #d5ff28; }
                40%  { color: #28ff7e; }
                60%  { color: #2872ff; }
                80%  { color: #d528ff; }
                100% { color: #ff2828; }
            }
            .lv16{color: #77ff77}
            .lv17{color: #aabbff}
            .lv18{color: #ffffcc}
            .lv19{color: #ffaacc}
            .lv20{color: #ab77ff}
            .exh{color: #ffaaaa}
            .adv{color: #ffffaa}
            .nov{color: #aaaaff}
            .APPEND{color: #ffccff;}
            .S{
                color:#ffff00;
            }
            .AAAplus{
                color:#ffff28;
            }
            .AAA{
                color:#ffff28;
            }
            .AAplus{
                color:#c3c3c3;
            }
            .AA{
                color:#c3c3c3;
            }
            .Aplus{
                color:#2ddf71;
            }
            .A{
                color:#2ddf71;
            }
            .B{
                color:#7777ff;
            }
            .C{
                color:#7777ff;
            }
            .D{
                color:#7777ff;
            }
            .E{
                color:#7777ff;
            }
            .F{
                color:#7777ff;
            }
            .fc{
                animation-name: flashfc;
                animation-duration: 0.2s;
                animation-iteration-count: infinite;
            }
            @keyframes flashfc {
                0%   { background-color: #ff2828; }
                20%  { background-color: #d5ff28; }
                40%  { background-color: #28ff7e; }
                60%  { background-color: #2872ff; }
                80%  { background-color: #d528ff; }
                100% { background-color: #ff2828; }
            }
            .failed{
                animation-name: flashfailed;
                animation-duration: 0.8s;
                animation-iteration-count: infinite;
            }
            @keyframes flashfailed {
                0%   { color: #ff2828; }
                50%  { color: #282828; }
                100% { color: #ff2828; }
            }
            .clear{color: #77ff77;}
            .hard{color: #ffc115;}
            .uc{color: #ff7777;}
            .puc{color: #ffff99;}
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script>
        var cnt = -1; // 表の表示範囲を切り替えるために使う。初期値は-1固定。
        var wsize = 10; // 表示範囲のサイズ
        function loadXml() {
            var getxml = $.ajax({
                url: './rival_updates.xml',
                type: 'GET',
                dataType: 'xml',
                cache: false
            });
            getxml.done(function(xml){
                // xmlデータからほしいデータをfindで探し処理
                var out = "<tr><td>from</td><td>title</td><td>score</td><td>diff</td></tr>";
                var out = "";
                cnt += 1;
                var cnt_mod;
                $(xml).find("Updates Item").each(function(index, item){
                    var lv = $(item).find('lv').text();
                    var rival = $(item).find('rival').text();
                    var title = $(item).find('title').text();
                    var difficulty = $(item).find('difficulty').text();
                    title = '<span class="'+difficulty+'">'+title+"</span>";
                    var score = $(item).find('score').text();
                    var myscore = $(item).find('myscore').text();
                    var behind_fmt = $(item).find('behind_fmt').text();
                    var rank = "";
                    if (score >= 990){
                        rank = '<span class="S">S</span>';
                    }
                    else if (score >= 980){
                        rank = '<span class="AAAplus">AAA+</span>';
                    }
                    else if (score >= 970){
                        rank = '<span class="AAA">AAA</span>';
                    }
                    else if (score >= 950){
                        rank = '<span class="AAplus">AA+</span>';
                    }
                    else if (score >= 930){
                        rank = '<span class="AA">AA</span>';
                    }
                    else if (score >= 900){
                        rank = '<span class="Aplus">A+</span>';
                    }
                    else if (score >= 870){
                        rank = '<span class="A">A</span>';
                    }
                    else if (score >= 750){
                        rank = '<span class="B">B</span>';
                    }
                    else if (score >= 650){
                        rank = '<span class="C">C</span>';
                    }
                    else{
                        rank = '<span class="D">D</span>';
                    }
                    cnt_mod = cnt % wsize;
                    if ((index >= wsize*cnt_mod) && (index < wsize*(cnt_mod+1))){
                        out += '<tr>';
                        out += '    <td>'+rival+'</td>';
                        out += '    <td><span class="lv'+lv+'">'+lv+'</span></td>';
                        out += '    <td>'+title+'</td>';
                        out += '    <td>'+score+'</td>';
                        out += '    <td>('+behind_fmt+')</td>';
                        out += '</tr>'
                    } 
                    // ループさせる
                    if (wsize*(cnt_mod) > $(xml).find("Updates Item").length){
                        cnt = 0;
                    }
                });
                $('#rival tbody').html(out);
            });
            getxml.fail(function(err) {
                alert('failed');
            });
        }

        window.addEventListener('DOMContentLoaded', function() {
            var roopTimer = setInterval(loadXml, 4000);
        });

</script>
</head>
<body>
  <div id="all">
    <table id="rival">
        <tbody>
        </tbody>
    </table>
  </div>
</body>
</html>